<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/fontawesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>

    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/app.css">
    <title>My web</title>
</head>
<body>
    <main class="main">
        <div class="main-container ">
            <div class="main-box navbar-path">
                <a href="/" class="btn btn-link">Trang chủ</a>/
                <a href="/mua-nha" class="btn btn-link">Mua nhà</a>/
                <span class="btn btn-link active">Chi tiết</span>
            </div>
        </div>
        <div class="main-container">
            <div class="main-box details-homes-container">
                <ul class="list slider-for">
                    <!-- js render api-->
                </ul>
                <ul class="list slider-nav">
                    <!-- js render api -->
                </ul>
            </div>
            <div class="home-info-container">
                <h3 class="home-name"> </h3>
                <p class="home-area"></p>
                <p class="home-price"></span></p>
                <p class="home-location"></p>
                <p class="home-type"></p>
                <p class="home-discount"></p>
            </div>
            <div class="home-control">
                <p class="home-control-title">liên hệ mua nhà bằng các phương thức : </p>
                <button class="btn home-control-btn btn--facebook">messenger</button>
                <button class="btn home-control-btn btn--facebook">facebook</button>
                <button class="btn home-control-btn btn--zalo">zalo</button>
                <button class="btn home-control-btn btn--phone">liên hệ SĐT 0996969696</button>
            </div>
        </div>
        <footer class="footer">
                <div class="footer-box footer-box--bottom">
                    <p class="footer-text-slogen">
                        @landHouse mua bán nhà uy tín, chất lượng đảm bảo 
                    </p>
                </div>
            </div>
        </footer>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script>
        var homeName = document.querySelector('.home-name');
        var homeArea = document.querySelector('.home-area');
        var homePrice = document.querySelector('.home-price');
        var homeLocation = document.querySelector('.home-location');
        var homeType = document.querySelector('.home-type');
        var homeDiscount = document.querySelector('.home-discount');
        var sliderFor = document.querySelector('.slider-for');
        var sliderNav = document.querySelector('.slider-nav');

        var pathUrl = window.location.pathname;
        console.log(pathUrl)
        fetch('/api/' + pathUrl,{method : 'POST',})
            .then(response=>response.json())
            .then(data=>{
                console.log(data);
                homeName.innerHTML = data.name;
                homeArea.innerHTML = 'Diện tích: '+data.area;
                homePrice.innerHTML = `Giá : <span class="text-strong">${data.price} VNĐ</span>`;
                homeLocation.innerHTML ='Địa chỉ: '+ data.location;
                homeType.innerHTML = 'Loại nhà đất: '+data.type;
                homeDiscount.innerHTML = 'Ưu đãi: ' + data.discount;
                if(data.gallery){
                    let imgHtmlArray = data.gallery.map(img=>{
                        return `<li class="slider__items">
                                    <img src="../${img}" alt="">
                                </li>`
                    })
                    sliderFor.innerHTML = imgHtmlArray.join('');
                    sliderNav.innerHTML = imgHtmlArray.join('');
                }
                $('.slider-for').slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                arrows: false,
                fade: true,
                asNavFor: '.slider-nav'
                });
                let x = 5,isDots=true;
                if(window.innerWidth < 768)
                {
                    isDots = false;
                    x = 2;
                }
                else if(window.innerWidth >= 768 && window.innerWidth < 1024){
                    x = 3;

                }
                $('.slider-nav').slick({
                slidesToShow: x,
                slidesToScroll: 1,
                asNavFor: '.slider-for',
                dots: isDots,
                centerMode: true,
                focusOnSelect: true,
                prevArrow: '<button class="slick-next slick-arrow" aria-label="Previous" type="button" style=""><i class="fas fa-chevron-left"></i></button>',
                nextArrow: '<button class="slick-prev slick-arrow" aria-label="Previous" type="button" style=""><i class="fas fa-chevron-right"></i></button>',
                });
            })
            .catch(err=>{console.log("lỗi fetch api")})
    </script>
    <script>
        
    </script>
</body>
</html>